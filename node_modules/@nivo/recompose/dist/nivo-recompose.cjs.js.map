{"version":3,"file":"nivo-recompose.cjs.js","sources":["../src/getDisplayName.ts","../src/setStatic.ts","../src/setDisplayName.ts","../src/shallowEqual.ts","../src/wrapDisplayName.ts","../src/shouldUpdate.ts","../src/utils/pick.ts","../src/compose.ts","../src/defaultProps.ts","../src/pure.ts","../src/setPropTypes.ts","../src/withProps.ts","../src/mapProps.ts","../src/withPropsOnChange.ts","../src/withState.ts"],"sourcesContent":["import { ComponentType } from 'react'\n\nexport const getDisplayName = (component: ComponentType<any> | string): string | undefined => {\n    if (typeof component === 'string') {\n        return component\n    }\n\n    if (!component) {\n        return undefined\n    }\n\n    return component.displayName || component.name || 'Component'\n}\n","import { ComponentType } from 'react'\n\nexport const setStatic =\n    (key: string, value: any): (<T extends ComponentType<any>>(component: T) => T) =>\n    BaseComponent => {\n        /* eslint-disable no-param-reassign */\n        // @ts-expect-error there's no way to type this\n        BaseComponent[key] = value\n        /* eslint-enable no-param-reassign */\n        return BaseComponent\n    }\n","import { ComponentType } from 'react'\nimport { setStatic } from './setStatic'\n\nexport const setDisplayName = (\n    displayName: string\n): (<T extends ComponentType<any>>(component: T) => T) => setStatic('displayName', displayName)\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @providesModule shallowEqual\n * @typechecks\n */\n\n/* eslint-disable no-self-compare */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x: unknown, y: unknown): boolean {\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        // Added the nonzero y check to make Flow happy, but it is redundant\n        return x !== 0 || y !== 0 || 1 / x === 1 / y\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nexport function shallowEqual(\n    objA: Record<string, unknown>,\n    objB: Record<string, unknown>\n): boolean {\n    if (is(objA, objB)) {\n        return true\n    }\n\n    if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n        return false\n    }\n\n    const keysA = Object.keys(objA)\n    const keysB = Object.keys(objB)\n\n    if (keysA.length !== keysB.length) {\n        return false\n    }\n\n    // Test for A's keys different from B.\n    for (let i = 0; i < keysA.length; i++) {\n        if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n            return false\n        }\n    }\n\n    return true\n}\n","import { ComponentType } from 'react'\nimport { getDisplayName } from './getDisplayName'\n\nexport const wrapDisplayName = (BaseComponent: ComponentType<any>, hocName: string): string =>\n    `${hocName}(${getDisplayName(BaseComponent)})`\n","import { Component, createFactory } from 'react'\nimport { setDisplayName } from './setDisplayName'\nimport { InferableComponentEnhancer, PredicateDiff } from './types'\nimport { wrapDisplayName } from './wrapDisplayName'\n\nexport const shouldUpdate =\n    <TProps extends Record<string, unknown>>(\n        test: PredicateDiff<TProps>\n        // eslint-disable-next-line @typescript-eslint/ban-types\n    ): InferableComponentEnhancer<{}> =>\n    (BaseComponent: any): any => {\n        const factory = createFactory(BaseComponent)\n        class ShouldUpdate extends Component {\n            shouldComponentUpdate(nextProps: any) {\n                // @ts-expect-error not type-able\n                return test(this.props, nextProps)\n            }\n\n            render() {\n                return factory(this.props)\n            }\n        }\n\n        if (process.env.NODE_ENV !== 'production') {\n            return setDisplayName(wrapDisplayName(BaseComponent, 'shouldUpdate'))(ShouldUpdate)\n        }\n        return ShouldUpdate\n    }\n","export const pick = (obj: Record<string, unknown>, keys: string[]) => {\n    const result: Record<string, unknown> = {}\n    for (let i = 0; i < keys.length; i++) {\n        const key = keys[i]\n        // eslint-disable-next-line no-prototype-builtins\n        if (obj.hasOwnProperty(key)) {\n            result[key] = obj[key]\n        }\n    }\n    return result\n}\n","import { ComponentClass, ComponentType } from 'react'\n\ninterface ComponentEnhancer<TInner, TOuter> {\n    (component: ComponentType<TInner>): ComponentClass<TOuter>\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const compose = <TInner, TOuter>(...funcs: Function[]): ComponentEnhancer<TInner, TOuter> =>\n    funcs.reduce<ComponentEnhancer<TInner, TOuter>>(\n        (a, b) =>\n            (...args) =>\n                a(b(...args)),\n        arg => arg as any\n    ) as ComponentEnhancer<TInner, TOuter>\n","import { createFactory } from 'react'\nimport { setDisplayName } from './setDisplayName'\nimport { DefaultingInferableComponentEnhancer } from './types'\nimport { wrapDisplayName } from './wrapDisplayName'\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const defaultProps =\n    <T = {}>(props: T): DefaultingInferableComponentEnhancer<T> =>\n    (BaseComponent: any): any => {\n        const factory = createFactory(BaseComponent)\n        const DefaultProps = (ownerProps: any) => factory(ownerProps)\n        DefaultProps.defaultProps = props\n        if (process.env.NODE_ENV !== 'production') {\n            // @ts-ignore\n            return setDisplayName(wrapDisplayName(BaseComponent, 'defaultProps'))(DefaultProps)\n        }\n        return DefaultProps\n    }\n","import { ComponentType } from 'react'\nimport { setDisplayName } from './setDisplayName'\nimport { shallowEqual } from './shallowEqual'\nimport { shouldUpdate } from './shouldUpdate'\nimport { wrapDisplayName } from './wrapDisplayName'\n\nexport const pure = <TProps>(component: ComponentType<TProps>): ComponentType<TProps> => {\n    const hoc = shouldUpdate((props, nextProps) => !shallowEqual(props, nextProps))\n\n    if (process.env.NODE_ENV !== 'production') {\n        // @ts-ignore\n        return setDisplayName(wrapDisplayName(component, 'pure'))(hoc(component))\n    }\n\n    // @ts-ignore\n    return hoc(component)\n}\n","import { ComponentType, ValidationMap } from 'react'\nimport { setStatic } from './setStatic'\n\nexport const setPropTypes = <P>(\n    propTypes: ValidationMap<P>\n): (<T extends ComponentType<P>>(component: T) => T) => setStatic('propTypes', propTypes)\n","import { mapProps } from './mapProps'\nimport { setDisplayName } from './setDisplayName'\nimport { InferableComponentEnhancerWithProps, Mapper } from './types'\nimport { wrapDisplayName } from './wrapDisplayName'\n\nexport const withProps = <TInner, TOuter>(\n    createProps: TInner | Mapper<TOuter, TInner>\n): InferableComponentEnhancerWithProps<TInner & TOuter, TOuter> => {\n    const hoc = mapProps(props => ({\n        ...(props as any),\n        // eslint-disable-next-line @typescript-eslint/ban-types\n        ...(typeof createProps === 'function' ? (createProps as Function)(props) : createProps),\n    }))\n    if (process.env.NODE_ENV !== 'production') {\n        return ((BaseComponent: any) =>\n            setDisplayName(wrapDisplayName(BaseComponent, 'withProps'))(hoc(BaseComponent))) as any\n    }\n    return hoc as InferableComponentEnhancerWithProps<TInner & TOuter, TOuter>\n}\n","import { createFactory } from 'react'\nimport { setDisplayName } from './setDisplayName'\nimport { InferableComponentEnhancerWithProps, Mapper } from './types'\nimport { wrapDisplayName } from './wrapDisplayName'\n\nexport const mapProps =\n    <TInner, TOuter>(\n        propsMapper: Mapper<TOuter, TInner>\n    ): InferableComponentEnhancerWithProps<TInner, TOuter> =>\n    (BaseComponent: any): any => {\n        const factory = createFactory(BaseComponent)\n        // @ts-ignore\n        const MapProps = (props: any) => factory(propsMapper(props))\n        if (process.env.NODE_ENV !== 'production') {\n            return setDisplayName(wrapDisplayName(BaseComponent, 'mapProps'))(MapProps)\n        }\n        return MapProps\n    }\n","import { Component, createFactory } from 'react'\nimport { polyfill } from 'react-lifecycles-compat'\nimport { setDisplayName } from './setDisplayName'\nimport { shallowEqual } from './shallowEqual'\nimport { InferableComponentEnhancerWithProps, Mapper, PredicateDiff } from './types'\nimport { pick } from './utils'\nimport { wrapDisplayName } from './wrapDisplayName'\n\nexport const withPropsOnChange =\n    <TInner, TOuter extends Record<string, unknown>>(\n        shouldMapOrKeys: string[] | PredicateDiff<TOuter>,\n        propsMapper: Mapper<TOuter, TInner>\n    ): InferableComponentEnhancerWithProps<TInner & TOuter, TOuter> =>\n    (BaseComponent: any): any => {\n        const factory = createFactory(BaseComponent)\n        const shouldMap =\n            typeof shouldMapOrKeys === 'function'\n                ? shouldMapOrKeys\n                : (props: TOuter, nextProps: TOuter) =>\n                      !shallowEqual(pick(props, shouldMapOrKeys), pick(nextProps, shouldMapOrKeys))\n\n        class WithPropsOnChange extends Component<TOuter> {\n            state = {\n                computedProps: propsMapper(this.props),\n                prevProps: this.props,\n            }\n\n            static getDerivedStateFromProps(\n                nextProps: TOuter,\n                prevState: WithPropsOnChange['state']\n            ) {\n                if (shouldMap(prevState.prevProps, nextProps)) {\n                    return {\n                        computedProps: propsMapper(nextProps),\n                        prevProps: nextProps,\n                    }\n                }\n\n                return {\n                    prevProps: nextProps,\n                }\n            }\n\n            render() {\n                return factory({\n                    ...this.props,\n                    ...this.state.computedProps,\n                })\n            }\n        }\n\n        polyfill(WithPropsOnChange)\n\n        if (process.env.NODE_ENV !== 'production') {\n            return setDisplayName(wrapDisplayName(BaseComponent, 'withPropsOnChange'))(\n                WithPropsOnChange\n            )\n        }\n\n        return WithPropsOnChange\n    }\n","import { createFactory, Component } from 'react'\nimport { setDisplayName } from './setDisplayName'\nimport { InferableComponentEnhancerWithProps, Mapper } from './types'\nimport { wrapDisplayName } from './wrapDisplayName'\n\ntype StateProps<TState, TStateName extends string, TStateUpdaterName extends string> = {\n    [stateName in TStateName]: TState\n} & { [stateUpdateName in TStateUpdaterName]: (state: TState) => TState }\n\nexport const withState =\n    <TOuter, TState, TStateName extends string, TStateUpdaterName extends string>(\n        stateName: TStateName,\n        stateUpdaterName: TStateUpdaterName,\n        initialState: TState | Mapper<TOuter, TState>\n    ): InferableComponentEnhancerWithProps<\n        StateProps<TState, TStateName, TStateUpdaterName>,\n        TOuter\n    > =>\n    (BaseComponent: any): any => {\n        const factory = createFactory(BaseComponent)\n        class WithState extends Component {\n            state = {\n                stateValue:\n                    typeof initialState === 'function'\n                        ? // eslint-disable-next-line @typescript-eslint/ban-types\n                          (initialState as Function)(this.props)\n                        : initialState,\n            }\n\n            updateStateValue = (updateFn: any, callback: any) =>\n                this.setState(\n                    ({ stateValue }: any) => ({\n                        stateValue:\n                            typeof updateFn === 'function' ? updateFn(stateValue) : updateFn,\n                    }),\n                    callback\n                )\n\n            render() {\n                return factory({\n                    ...this.props,\n                    [stateName]: this.state.stateValue,\n                    [stateUpdaterName]: this.updateStateValue,\n                })\n            }\n        }\n\n        if (process.env.NODE_ENV !== 'production') {\n            return setDisplayName(wrapDisplayName(BaseComponent, 'withState'))(WithState)\n        }\n        return WithState\n    }\n"],"names":["getDisplayName","component","displayName","name","setStatic","key","value","BaseComponent","setDisplayName","hasOwnProperty","Object","prototype","is","x","y","shallowEqual","objA","objB","keysA","keys","keysB","length","i","call","wrapDisplayName","hocName","shouldUpdate","test","factory","createFactory","ShouldUpdate","_Component","apply","this","arguments","_inheritsLoose","_proto","shouldComponentUpdate","nextProps","props","render","Component","process","env","NODE_ENV","pick","obj","result","_len","funcs","Array","_key","reduce","a","b","arg","DefaultProps","ownerProps","defaultProps","hoc","propTypes","createProps","propsMapper","_extends","MapProps","shouldMapOrKeys","shouldMap","WithPropsOnChange","_this","args","concat","state","computedProps","prevProps","getDerivedStateFromProps","prevState","polyfill","stateName","stateUpdaterName","initialState","WithState","stateValue","updateStateValue","updateFn","callback","setState","_ref","_extends2"],"mappings":"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"}